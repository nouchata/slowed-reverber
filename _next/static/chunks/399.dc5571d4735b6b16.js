"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{2927:function(e,t,o){var n=o(5893);t.Z=function(e){return(0,n.jsxs)("div",{className:"h-full w-full flex flex-col justify-center gap-4 items-center text-white ".concat(null===e||void 0===e?void 0:e.className),children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-[0_0_40%] w-full",children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,n.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,n.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),(0,n.jsx)("strong",{className:"w-10/12 text-center",children:e.error})]})}},5822:function(e,t,o){var n=o(5893),l=o(7294);t.Z=function(e){var t,o,s=(0,l.useMemo)((function(){return e.blob?URL.createObjectURL(e.blob):""}),[e.blob]);return(0,n.jsxs)("div",{className:e.className,children:[(null===(t=e.blob)||void 0===t?void 0:t.type.includes("image"))&&(0,n.jsx)("img",{alt:"Visual source preview",className:"w-full h-full object-cover ".concat(e.notRounded?"":"rounded"),src:s}),(null===(o=e.blob)||void 0===o?void 0:o.type.includes("video"))&&(0,n.jsx)("video",{about:"Visual source preview",controls:!1,muted:!0,autoPlay:!0,loop:!0,className:"w-full h-full object-cover ".concat(e.notRounded?"":"rounded"),src:s}),!e.blob&&(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"opacity-50 w-full h-full","aria-labelledby":"title",children:[(0,n.jsx)("title",{children:"No media available"}),(0,n.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,n.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})]})}},4399:function(e,t,o){o.r(t),o.d(t,{default:function(){return T}});var n=o(7568),l=o(655),s=o(5893),r=o(1163),i=o.n(r),a=o(7294),c=o(8476),d=o(7299),u=o(2226),x=o(5070),p=o(2927),f=o(2939),h=o(3917),v=o(1108),m=o(7942),b=o(5822),w=function(e){return"video"===e.type?(0,s.jsxs)("div",{className:"".concat(e.className," box-border flex flex-row flex-nowrap items-center bg-app-input-bg rounded drop-shadow-md hover:outline-2 hover:outline-app-input-border hover:outline hover:outline-offset-1"),children:[(0,s.jsxs)("button",{className:"box-border flex flex-col items-center justify-center flex-1 h-full p-1 text-sm hover:bg-white/5 disabled:hover:bg-transparent disabled:bg-app-element-disabled-faded disabled:text-gray-600 font-bold ".concat(e.exportChoice===x.T.TO_MP4?"font-extrabold bg-white/5  ":""),disabled:!e.isActive||!e.isEncoderLoaded,onClick:function(){e.setExportChoice(x.T.TO_MP4)},children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-[0_1_70px] ".concat(e.exportChoice===x.T.TO_MP4?"fill-current":""),children:[(0,s.jsx)("polygon",{points:"23 7 16 12 23 17 23 7"}),(0,s.jsx)("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})]}),(0,s.jsxs)("p",{className:"overflow-hidden flex flex-col",children:[(0,s.jsx)("span",{children:"Export MP4"}),(0,s.jsx)("span",{className:"text-xs font-light",children:"(most compatible)"})]})]}),(0,s.jsx)("div",{className:"bg-app-modal-xl-background h-5/6 w-[1px]"}),(0,s.jsxs)("button",{className:"box-border flex flex-col items-center justify-center flex-1 h-full p-1 text-sm hover:bg-white/5 disabled:hover:bg-transparent disabled:bg-app-element-disabled-faded disabled:text-gray-600 font-bold ".concat(e.exportChoice===x.T.TO_WEBM?"font-extrabold bg-white/5  ":""),disabled:!e.isActive||!e.isEncoderLoaded,onClick:function(){e.setExportChoice(x.T.TO_WEBM)},children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-[0_1_70px]",children:[(0,s.jsx)("path",{className:e.exportChoice===x.T.TO_WEBM?"fill-current":"",d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"}),(0,s.jsx)("polygon",{className:e.exportChoice===x.T.TO_WEBM?"fill-app-input-bg stroke-app-input-bg":"",points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"})]}),(0,s.jsxs)("p",{className:"overflow-hidden flex flex-col",children:[(0,s.jsx)("span",{children:"Export WEBM"}),(0,s.jsx)("span",{className:"text-xs font-light",children:"(lightweight)"})]})]}),!e.isActive&&(0,s.jsx)("div",{className:"absolute w-full h-full top-0 left-0 rounded bg-app-element-disabled opacity-50"})]}):(0,s.jsxs)("div",{className:"".concat(e.className," box-border flex flex-col flex-nowrap items-center bg-app-input-bg rounded drop-shadow-md hover:outline-2 hover:outline-app-input-border hover:outline hover:outline-offset-1"),children:[(0,s.jsxs)("button",{className:"box-border flex flex-col items-center justify-center flex-1 w-full text-sm hover:bg-white/5 disabled:hover:bg-transparent disabled:bg-app-element-disabled-faded disabled:text-gray-600 font-bold ".concat(e.exportChoice===x.T.TO_RAW_AUDIO?"font-extrabold bg-white/5  ":""),disabled:!e.isActive,onClick:function(){e.setExportChoice(x.T.TO_RAW_AUDIO)},children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-[0_1_50px]",children:[(0,s.jsx)("circle",{className:e.exportChoice===x.T.TO_RAW_AUDIO?"fill-current":"",cx:"12",cy:"12",r:"10"}),(0,s.jsx)("circle",{className:e.exportChoice===x.T.TO_RAW_AUDIO?"fill-current stroke-app-input-bg":"",cx:"12",cy:"12",r:"3"})]}),(0,s.jsxs)("p",{className:"overflow-hidden flex flex-col",children:[(0,s.jsx)("span",{children:"Export raw data"}),(0,s.jsx)("span",{className:"text-xs font-light",children:"(.wav format)"})]})]}),(0,s.jsx)("div",{className:"bg-app-modal-xl-background w-5/6 h-[1px]"}),(0,s.jsxs)("div",{className:"flex-1 flex flex-row flex-nowrap w-full",children:[(0,s.jsxs)("button",{className:"box-border flex flex-col items-center justify-center flex-1 w-full p-1 text-sm hover:bg-white/5 disabled:hover:bg-transparent disabled:bg-app-element-disabled-faded disabled:text-gray-600 font-bold ".concat(e.exportChoice===x.T.TO_MP3?"font-extrabold bg-white/5  ":""),disabled:!e.isActive||!e.isEncoderLoaded,onClick:function(){e.setExportChoice(x.T.TO_MP3)},children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-[0_1_50px]",children:[(0,s.jsx)("path",{d:"M3 18v-6a9 9 0 0 1 18 0v6"}),(0,s.jsx)("path",{className:e.exportChoice===x.T.TO_MP3?"fill-current":"",d:"M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"})]}),(0,s.jsxs)("p",{className:"overflow-hidden flex flex-col",children:[(0,s.jsx)("span",{children:"Export MP3"}),(0,s.jsx)("span",{className:"text-xs font-light",children:"(most common)"})]})]}),(0,s.jsx)("div",{className:"bg-app-modal-xl-background h-5/6 w-[1px]"}),(0,s.jsxs)("button",{className:"box-border flex flex-col items-center justify-center flex-1 w-full p-1 text-sm hover:bg-white/5 disabled:hover:bg-transparent disabled:bg-app-element-disabled-faded disabled:text-gray-600 font-bold ".concat(e.exportChoice===x.T.TO_AAC?"font-extrabold bg-white/5  ":""),disabled:!e.isActive||!e.isEncoderLoaded,onClick:function(){e.setExportChoice(x.T.TO_AAC)},children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-[0_1_50px]",children:[(0,s.jsx)("rect",{className:e.exportChoice===x.T.TO_AAC?"fill-current":"",x:"4",y:"2",width:"16",height:"20",rx:"2",ry:"2"}),(0,s.jsx)("circle",{className:e.exportChoice===x.T.TO_AAC?"stroke-app-input-bg":"",cx:"12",cy:"14",r:"4"}),(0,s.jsx)("line",{className:e.exportChoice===x.T.TO_AAC?"stroke-app-input-bg stroke-[3]":"",x1:"12",y1:"6",x2:"12.01",y2:"6"})]}),(0,s.jsxs)("p",{className:"overflow-hidden flex flex-col",children:[(0,s.jsx)("span",{children:"Export AAC"}),(0,s.jsx)("span",{className:"text-xs font-light",children:"(better quality)"})]})]})]}),!e.isActive&&(0,s.jsx)("div",{className:"absolute w-full h-full top-0 left-0 rounded bg-app-element-disabled opacity-50"})]})},g=function(e){var t,o,n,l=(0,a.useContext)(d.B),r=l.encoderState,i=l.currentSound,c=(0,a.useContext)(v.R),u=c.appData,p=c.setAppData,f=u.router,h=(0,a.useState)("audio"),g=h[0],C=h[1],j=(0,a.useMemo)((function(){var e,t,o;return(null===i||void 0===i||null===(e=i.visualSourceData)||void 0===e?void 0:e.data)?new Blob([null===i||void 0===i||null===(t=i.visualSourceData)||void 0===t?void 0:t.data],{type:null===i||void 0===i||null===(o=i.visualSourceData)||void 0===o?void 0:o.type}):void 0}),[null===i||void 0===i||null===(t=i.visualSourceData)||void 0===t?void 0:t.data]);return(0,s.jsxs)("div",{className:"".concat(e.className," flex flex-col items-center pb-20 select-none text-white"),children:[(0,s.jsxs)("div",{className:"p-3 w-full flex-[0_0_auto] flex gap-5 justify-center",children:[(0,s.jsx)(b.Z,{className:"flex-[0_0_auto] w-[10vh] h-[10vh] min-h-[70px] min-w-[70px] max-h-[120px] max-w-[120px] outline-dashed outline-2 outline-offset-8 mr-3 rounded",blob:j}),(0,s.jsxs)("div",{className:"flex-initial h-full overflow-hidden flex flex-col justify-center",children:[(0,s.jsx)("h3",{className:"font-extrabold text-2xl overflow-hidden text-ellipsis whitespace-nowrap",children:(null===i||void 0===i||null===(o=i.soundInfoData)||void 0===o?void 0:o.name)||"Unknown song name"}),(0,s.jsx)("h4",{className:"italic font-extralight text-lg overflow-hidden text-ellipsis whitespace-nowrap",children:(null===i||void 0===i||null===(n=i.soundInfoData)||void 0===n?void 0:n.author)||"Unknown author"})]})]}),(0,s.jsxs)("p",{className:"w-11/12 py-2 text-center flex flex-col",children:[r===m.w.LOADING&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"font-extrabold animate-pulse",children:"Encoder still loading..."}),(0,s.jsx)("span",{className:"text-xs font-light",children:"Your export choices are restricted until then"})]}),r===m.w.ERROR&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"font-extrabold text-red-700",children:"The encoder hasn't loaded properly"}),(0,s.jsx)("span",{className:"text-xs font-light text-red-100",children:"You can only extract raw edited song"})]}),r===m.w.LOADED&&(0,s.jsx)("span",{className:"font-extrabold text-amber-400",children:"Encoder loaded"})]}),(0,s.jsxs)("div",{className:"relative w-11/12 flex-[0_0_40px] my-5 box-border flex flex-row flex-nowrap items-center bg-app-input-bg rounded drop-shadow-md hover:outline-2 hover:outline-app-input-border hover:outline hover:outline-offset-1",children:[(0,s.jsx)("button",{className:"flex-1 h-full text-sm hover:bg-white/5 ".concat("audio"===g?"font-extrabold":""),onClick:function(){"audio"!==g&&(e.setExportChoice(x.T.NO_CHOICE),C("audio"))},disabled:!e.isActive,children:"Audio export"}),(0,s.jsx)("div",{className:"w-[1px] h-5/6 bg-app-modal-xl-background"}),(0,s.jsx)("button",{className:"flex-1 flex flex-wrap justify-center content-center h-full text-sm hover:bg-white/5 ".concat("video"===g?"font-extrabold":""),onClick:function(){var t;"video"!==g&&(e.setExportChoice(x.T.NO_CHOICE),C("video")),(null===i||void 0===i||null===(t=i.visualSourceData)||void 0===t?void 0:t.data)||(p({error:{type:"normal",value:"To export a video, you first need to input a visual asset"}}),f.push({pathname:"/app/songs",query:{md:"editVisual",s:null===i||void 0===i?void 0:i.soundInfoKey}}))},disabled:!e.isActive,children:"Video export"}),!e.isActive&&(0,s.jsx)("div",{className:"absolute w-full h-full top-0 left-0 rounded bg-app-element-disabled opacity-50"})]}),(0,s.jsx)(w,{className:"relative w-11/12 flex-[0_0_200px] my-5",exportChoice:e.exportChoice,setExportChoice:e.setExportChoice,type:g,isActive:e.isActive,isEncoderLoaded:r===m.w.LOADED})]})},C=o(6038),j=o(5490),y=function(e){var t=(0,a.useRef)(null),o=(0,a.useRef)(null),n=(0,a.useRef)(null);return(0,j.Z)((function(){var e=C.ZP.context((function(){C.ZP.fromTo(o.current,{rotate:"-5deg",transformOrigin:"center"},{rotate:"5deg",duration:"0.1",ease:"none",repeat:-1,yoyo:!0}),C.ZP.to(t.current,{onRepeat:function(){if(t.current){var e,o=document.createElementNS("http://www.w3.org/2000/svg","text");o.style.color="white",o.style.fill="white",o.style.fontSize="1rem",o.setAttribute("x","15%"),o.setAttribute("y","".concat(30*Math.random()+35,"%")),o.textContent=String(Math.round(Math.random())),null===(e=t.current)||void 0===e||e.prepend(o),C.ZP.to(o,{attr:{x:"85%"},duration:1,ease:"power2.out",onComplete:function(){var e;null===(e=t.current)||void 0===e||e.removeChild(o),n.current&&C.ZP.fromTo(n.current,{scaleY:1,transformOrigin:"bottom"},{scaleY:1.2,ease:"power4.out",repeat:1,yoyo:!0})}})}},duration:.2,repeat:-1})}));return function(){return e.revert()}}),[]),(0,s.jsxs)("svg",{ref:t,xmlns:"http://www.w3.org/2000/svg",className:"".concat(e.className," text-white"),stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round","aria-labelledby":"title",children:[(0,s.jsx)("title",{children:"Extraction"}),(0,s.jsx)("image",{ref:o,height:"75%",width:"20%",y:"12.5%",x:"5%",xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath fill='%23".concat(e.fillColor,"' d='M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5'%3E%3C/path%3E%3Cpath d='M21 12c0 1.66-4 3-9 3s-9-1.34-9-3'%3E%3C/path%3E%3Cellipse fill='%23").concat(e.fillColor,"' cx='12' cy='5' rx='9' ry='3'%3E%3C/ellipse%3E%3C/svg%3E")}),(0,s.jsx)("image",{ref:n,height:"75%",width:"20%",y:"12.5%",x:"75%",xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23".concat(e.fillColor,"' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='16.5' y1='9.4' x2='7.5' y2='4.21'%3E%3C/line%3E%3Cpath d='M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z'%3E%3C/path%3E%3Cpolyline points='3.27 6.96 12 12.01 20.73 6.96'%3E%3C/polyline%3E%3Cline x1='12' y1='22.08' x2='12' y2='12'%3E%3C/line%3E%3C/svg%3E")})]})},N=["unknown","wav","mp3","m4a","webm","mp4"];function E(e,t,o){var n="";return e&&(n+="".concat(e," - ")),n+="".concat(t||"Unknown song",".").concat(o||"media")}var k,_=["Raw audio process","Custom export"],A=function(e){var t,o,r,i,c,u=(0,a.useState)(),p=u[0],f=u[1],h=(0,a.useRef)(null),m=(0,a.useContext)(d.B),b=m.soundsManager,w=m.isSoundsManagerInit,g=m.encoderState,C=m.currentSound,j=(0,a.useContext)(v.R).setAppData,k=(0,a.useReducer)((function(e,t){var o={progress:t.progress||e.progress,stepCount:e.stepCount};if(1===o.progress&&(o.progress=0,o.stepCount+=1),h.current&&t.consoleEntry){var n=t.consoleEntry.entry;"normal"!==t.consoleEntry.type&&(n='<span style="color: '.concat("error"===t.consoleEntry.type?"red":"green",';">').concat(n,"</span>")),h.current.firstChild.innerHTML.length&&(h.current.firstChild.innerHTML+="<br />"),h.current.firstChild.innerHTML+=n,h.current.scrollTo(0,h.current.scrollHeight)}return o}),{progress:0,stepCount:0}),A=k[0],O=k[1];return(0,a.useEffect)((function(){(0,n.Z)((function(){var t,o,n,s,r,i,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return h.current&&e.isActive&&w&&e.exportChoice!==x.T.NO_CHOICE&&!h.current.consoleRunning?(h.current.consoleRunning=!0,h.current.consoleError=!1,[4,b.exportSong(O).catch((function(e){O({consoleEntry:{type:"error",entry:e.message}}),h.current&&(h.current.consoleError=!0)}))]):[3,5];case 1:return!(n=l.sent())||e.exportChoice===x.T.TO_RAW_AUDIO||h.current.consoleError?[3,4]:(a=b.encoderUtils,[4,n.arrayBuffer()]);case 2:return[4,a.apply(b,[l.sent(),e.exportChoice,O]).catch((function(e){O({consoleEntry:{type:"error",entry:e.message}}),h.current&&(h.current.consoleError=!0)}))];case 3:(i=l.sent())&&f({blob:i,link:URL.createObjectURL(i),name:E(null===C||void 0===C||null===(s=C.soundInfoData)||void 0===s?void 0:s.author,null===C||void 0===C||null===(r=C.soundInfoData)||void 0===r?void 0:r.name,N[e.exportChoice])}),l.label=4;case 4:n&&e.exportChoice===x.T.TO_RAW_AUDIO&&f({blob:n,link:URL.createObjectURL(n),name:E(null===C||void 0===C||null===(t=C.soundInfoData)||void 0===t?void 0:t.author,null===C||void 0===C||null===(o=C.soundInfoData)||void 0===o?void 0:o.name,N[e.exportChoice])}),l.label=5;case 5:return[2]}}))}))()}),[e.isActive,e.exportChoice,h.current,w,g]),(0,s.jsxs)("div",{className:"".concat(e.className," flex flex-col flex-nowrap items-center pb-20 select-none text-white"),children:[(0,s.jsx)(y,{className:" w-full flex-[0_0_120px]",fillColor:"22252A"}),(0,s.jsxs)("h3",{className:"font-extrabold text-lg my-3",children:[!(null===(t=h.current)||void 0===t?void 0:t.consoleError)&&A.stepCount<(e.exportChoice===x.T.TO_RAW_AUDIO?1:2)&&"Step ".concat(A.stepCount+1,"/").concat(e.exportChoice===x.T.TO_RAW_AUDIO?1:2," - ").concat(_[A.stepCount]),!(null===(o=h.current)||void 0===o?void 0:o.consoleError)&&A.stepCount>=(e.exportChoice===x.T.TO_RAW_AUDIO?1:2)&&"Done",(null===(r=h.current)||void 0===r?void 0:r.consoleError)&&"An error occured"]}),!p&&!(null===(i=h.current)||void 0===i?void 0:i.consoleError)&&(0,s.jsx)("div",{id:"export-progress",className:"w-11/12 flex-[0_0_20px] my-3 border-white border-2 rounded",children:(0,s.jsx)("div",{className:"w-full h-full transition-all bg-white",style:{transformOrigin:"left",transform:"scaleX(".concat(A.progress,")")}})}),(0,s.jsx)("div",{className:"box-border w-11/12 overflow-hidden flex-[0_0_400px] p-2 bg-slate-900 shadow-md rounded transition-colors",children:(0,s.jsxs)("div",{ref:h,className:"relative w-full h-full overflow-hidden font-mono text-sm break-words ".concat((null===(c=h.current)||void 0===c?void 0:c.consoleError)?"overflow-y-scroll":""),children:[!p&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"select-text"}),(0,s.jsx)("span",{className:"animate-inline-blink",children:"_"})]}),p&&(0,s.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full flex flex-col gap-2 overflow-hidden",children:[(0,s.jsxs)("h4",{className:"flex-[0_0_50px] box-border px-2 flex items-center font-bold text-lg font-sans",children:[(0,s.jsx)("img",{alt:"Disc",className:"h-8 pr-3",src:"data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='10'%3E%3C/circle%3E%3Ccircle cx='12' cy='12' r='3'%3E%3C/circle%3E%3C/svg%3E"}),(0,s.jsx)("span",{className:"whitespace-nowrap overflow-hidden text-ellipsis select-text",children:p.name})]}),(0,s.jsxs)("div",{className:"relative flex-1 flex justify-center items-center bg-black",children:[p.blob.type.includes("audio")&&(0,s.jsx)("audio",{controls:!0,src:p.link}),p.blob.type.includes("video")&&(0,s.jsx)("video",{className:"absolute top-0 left-0 w-full h-full",controls:!0,src:p.link})]}),(0,s.jsxs)("div",{className:"flex-[0_0_50px] flex gap-2",children:[(0,s.jsx)("a",{className:"flex-1 flex justify-center items-center cursor-pointer no-underline",href:p.link,download:p.name,children:(0,s.jsx)("img",{className:"h-8",alt:"Download",src:"data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='1' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4'%3E%3C/path%3E%3Cpolyline points='7 10 12 15 17 10'%3E%3C/polyline%3E%3Cline x1='12' y1='15' x2='12' y2='3'%3E%3C/line%3E%3C/svg%3E"})}),(0,s.jsx)("button",{className:"flex-1 flex justify-center items-center",onClick:function(){var e=p.name,t={files:[new File([p.blob],e,{type:p.blob.type})],title:e};navigator.canShare&&navigator.canShare(t)?navigator.share(t):j({error:{type:"normal",value:"The share function is not available with your configuration"}})},children:(0,s.jsx)("img",{className:"h-8",alt:"Share",src:"data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='1' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='18' cy='5' r='3'%3E%3C/circle%3E%3Ccircle cx='6' cy='12' r='3'%3E%3C/circle%3E%3Ccircle cx='18' cy='19' r='3'%3E%3C/circle%3E%3Cline x1='8.59' y1='13.51' x2='15.42' y2='17.49'%3E%3C/line%3E%3Cline x1='15.41' y1='6.51' x2='8.59' y2='10.49'%3E%3C/line%3E%3C/svg%3E"})})]})]})]})})]})};!function(e){e[e.CONFIG=0]="CONFIG",e[e.ENCODING=1]="ENCODING"}(k||(k={}));var O=[0,-100],S=["Configuration","Export"],T=function(){var e=(0,a.useState)({state:u.b.LOADING}),t=e[0],o=e[1],r=(0,a.useContext)(d.B),v=r.currentSound,m=r.soundsManager,b=(0,a.useState)(k.CONFIG),w=b[0],C=b[1],j=(0,a.useState)(!1),y=j[0],N=j[1],E=(0,a.useState)(x.T.NO_CHOICE),_=E[0],T=E[1];return(0,a.useEffect)((function(){i().query.s?(0,n.Z)((function(){var e,t;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return t=!1,void 0!==(null===v||void 0===v?void 0:v.soundInfoKey)&&v.soundInfoKey===Number(i().query.s)?[3,2]:(null===m||void 0===m||m.resetCurrentSound(),[4,null===m||void 0===m?void 0:m.injectInCurrentSong("sounds-info",Number(i().query.s),!0,{visualSourceData:!0}).catch((function(e){t=!0,o({state:u.b.ERROR,error:e.message})}))]);case 1:n.sent(),n.label=2;case 2:return t||((null===v||void 0===v||null===(e=v.visualSourceData)||void 0===e?void 0:e.data)?o({state:u.b.SUCCESS}):null===m||void 0===m||m.injectInCurrentSong("sounds-info",0,!1,{soundInfoData:!0,soundInfoKey:!0,soundInfoStore:!0,soundSourceData:!0}).catch((function(){})).finally((function(){o({state:u.b.SUCCESS})}))),[2]}}))}))():o({state:u.b.ERROR,error:"No song id was given"})}),[]),t.state===u.b.LOADING?(0,s.jsx)(h.Z,{}):t.state===u.b.ERROR?(0,s.jsx)(p.Z,{error:t.error||""}):(0,s.jsxs)("div",{id:"export-media-modal-container",className:"relative w-full h-full box-border rounded-t-lg",children:[(0,s.jsx)(c.h,{title:"Export - Slowed Reverber",description:"Export the audio or video of the current song"}),(0,s.jsxs)("div",{id:"export-media-modal-container",className:"rounded-t-lg flex flex-col flex-nowrap w-full h-full",children:[(0,s.jsx)(f.Z,{aButtonIsPressed:y,currentPaneState:w,setAButtonIsPressed:N,nextBtnCallback:(0,n.Z)((function(){return(0,l.__generator)(this,(function(e){return[2,!0]}))})),setPaneState:C,buttonAvailability:[!1,w===k.CONFIG&&_!==x.T.NO_CHOICE],title:S[w]}),(0,s.jsxs)("div",{className:"overflow-visible flex-1 w-full h-[calc(100%-50px)] flex flex-nowrap transition-transform",style:{transform:"translateX(".concat(O[w],"%)")},children:[(0,s.jsx)(g,{className:"box-border flex-[0_0_100%] overflow-auto",isActive:w===k.CONFIG,exportChoice:_,setExportChoice:T}),(0,s.jsx)(A,{className:"box-border flex-[0_0_100%] overflow-auto",exportChoice:_,isActive:w===k.ENCODING})]})]})]})}},2939:function(e,t,o){var n=o(7568),l=o(655),s=o(5893),r=o(7294),i=o(1108);t.Z=function(e){var t=(0,r.useContext)(i.R).appData,o=t.router,a=t.oldRoutes;return(0,s.jsxs)("header",{className:"w-full flex-[0_0_50px] flex flex-nowrap select-none",children:[(0,s.jsx)("button",{className:"flex-[0_0_20%] text-white text-xs overflow-hidden ".concat(e.buttonAvailability[0]?"visible":"invisible"),disabled:e.aButtonIsPressed||!e.buttonAvailability[0],onClick:function(){e.aButtonIsPressed||(e.setAButtonIsPressed(!0),(0,n.Z)((function(){return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return e.previousBtnCallback?[4,e.previousBtnCallback()]:[3,2];case 1:return t.sent()&&e.setPaneState(e.currentPaneState-1),[3,3];case 2:e.setPaneState(e.currentPaneState-1),t.label=3;case 3:return e.setAButtonIsPressed(!1),[2]}}))}))())},children:(0,s.jsxs)("span",{className:"inline-block",children:[(0,s.jsx)("span",{style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='19' y1='12' x2='5' y2='12'%3E%3C/line%3E%3Cpolyline points='12 19 5 12 12 5'%3E%3C/polyline%3E%3C/svg%3E\")"},className:"inline px-2 bg-no-repeat bg-left bg-contain"}),"Previous"]})}),(0,s.jsx)("h2",{className:"flex-1 flex items-center text-lg font-bold text-white overflow-hidden",children:(0,s.jsx)("span",{className:"overflow-hidden text-ellipsis whitespace-nowrap text-center w-full",children:e.title})}),(0,s.jsx)("button",{className:"flex-[0_0_20%] text-white text-xs overflow-hidden ".concat(e.buttonAvailability[1]?"visible":"invisible"),disabled:e.aButtonIsPressed||!e.buttonAvailability[1],onClick:function(){e.nextBtnCallback&&!e.aButtonIsPressed&&(e.setAButtonIsPressed(!0),(0,n.Z)((function(){return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.nextBtnCallback()];case 1:return t.sent()&&(void 0===e.lastPaneState||e.currentPaneState!==e.lastPaneState?e.setPaneState(e.currentPaneState+1):o.push(a.length?a[a.length-1].asPath:"/app/songs")),e.setAButtonIsPressed(!1),[2]}}))}))())},children:(0,s.jsxs)("span",{className:"inline-block",children:[void 0===e.lastPaneState||e.currentPaneState!==e.lastPaneState?"Next":"Save",(0,s.jsx)("span",{style:{backgroundImage:void 0===e.lastPaneState||e.currentPaneState!==e.lastPaneState?"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='5' y1='12' x2='19' y2='12'%3E%3C/line%3E%3Cpolyline points='12 5 19 12 12 19'%3E%3C/polyline%3E%3C/svg%3E\")":"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='20 6 9 17 4 12'%3E%3C/polyline%3E%3C/svg%3E\")"},className:"inline px-2 bg-no-repeat bg-right bg-contain"})]})})]})}},2226:function(e,t,o){var n;o.d(t,{b:function(){return n}}),function(e){e[e.LOADING=0]="LOADING",e[e.ERROR=1]="ERROR",e[e.SUCCESS=2]="SUCCESS"}(n||(n={}))}}]);