(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[342],{7706:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/songs",function(){return n(4647)}])},4647:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s=n(5893),o=n(7294),l=n(6578),i=n(8476),r=n(7568),a=n(828),d=n(655),c=n(6038),u=n(1664),x=n.n(u),h=n(7299),p=n(2226),w=n(2222);var f=function(e){var t=(0,o.useState)({state:p.b.LOADING}),n=t[0],l=t[1],i=(0,o.useContext)(h.B),u=i.soundsManager,f=i.isSoundsManagerInit,v=(0,o.useState)(void 0),m=v[0],g=v[1],y=(0,o.useRef)(null),C=(0,o.useState)(!1),b=C[0],E=C[1];return(0,o.useEffect)((function(){(0,r.Z)((function(){var t,n,o,i,r;return(0,d.__generator)(this,(function(d){switch(d.label){case 0:return f?(l({state:p.b.LOADING}),t=!1,[4,null===u||void 0===u?void 0:u.getAllFromIndex(e.store,"by-date",!0).catch((function(e){t=!0,l({state:p.b.ERROR,error:e.message})}))]):[2];case 1:return n=d.sent(),t?[2]:(o=(0,a.Z)(n,2),i=o[0],r=o[1],g(i.map((function(t,n){var o=function(e){return{reverb:w.Z.valueConverter("reverb",e.reverbEffectValue||0,!1),distance:w.Z.valueConverter("distance",e.lowKeyEffectValue||0,!1),speed:{type:e.speedValue&&1!==e.speedValue?e.speedValue<1?"slowed":"sped up":"normal",value:function(){var t,n=w.Z.valueConverter("speed",null!==(t=e.speedValue)&&void 0!==t?t:1,!1);return 50===n?50:n<50?2*n:2*(n-50)}()}}}(t);return(0,s.jsx)(x(),{href:{pathname:"/app/songs",query:"sounds-info"===e.store?{md:"viewSong",s:r[n]}:{md:"editSong",t:r[n]}},children:(0,s.jsxs)("li",{className:"relative overflow-hidden box-border bg-app-modal-xl-lighter/70 w-full h-24 rounded shadow-inner select-none cursor-pointer my-1",children:[(0,s.jsx)("h6",{className:"absolute top-1 px-3 text-2xl w-full font-extrabold overflow-hidden whitespace-nowrap text-ellipsis",title:"Song name",children:void 0!==t.name?t.name||"\u300c \u300d":"Unknown name"}),(0,s.jsx)("span",{className:"absolute block top-8 px-3 text-sm font-serif italic w-full overflow-hidden whitespace-nowrap text-ellipsis",title:"Author",children:t.author||"Unknown author"}),(0,s.jsxs)("p",{className:"absolute bg-white/10 px-3 bottom-1 w-full shadow text-xs text-center overflow-hidden whitespace-nowrap text-ellipsis",title:"Data description",children:[(0,s.jsxs)("span",{style:{opacity:Math.max(10,o.speed.value)/100},children:["normal"===o.speed.type&&"Normal speed","slowed"===o.speed.type&&"Slowed down","sped up"===o.speed.type&&"Sped up"]})," ","\u2022"," ",(0,s.jsx)("span",{style:{opacity:Math.max(10,o.reverb)/100},children:"Reverbed"})," ","\u2022"," ",(0,s.jsx)("span",{style:{opacity:Math.max(10,o.distance)/100},children:"Muffled"})]})]})},n)}))),l({state:p.b.SUCCESS}),[2])}}))}))()}),[f,u]),(0,s.jsxs)("div",{className:"".concat(e.className," px-1 ").concat(n.state===p.b.LOADING?"animate-pulse":""),children:[(0,s.jsxs)("div",{className:"overflow-hidden h-8 flex flex-nowrap items-center gap-2 cursor-pointer",onClick:function(){y.current&&n.state!==p.b.LOADING&&(c.ZP.to(y.current,{height:b?"auto":"0",duration:.5,ease:"none.none"}),E(!b))},children:[(0,s.jsx)("h5",{className:"shrink-0 font-bold",children:"sounds-info"===e.store?"Songs":"Drafts"}),n.state===p.b.SUCCESS&&(0,s.jsx)("span",{className:"shrink-0 bg-white overflow-hidden box-border flex justify-center items-center h-4/6 px-1 mr-1 font-bold text-xs rounded-xl text-black",title:"Number of ".concat("sounds-info"===e.store?"songs":"drafts"),children:(null===m||void 0===m?void 0:m.length)||0}),(0,s.jsxs)("svg",{className:"flex-1 h-full overflow-visible opacity-50",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",width:"0",strokeWidth:"3",strokeLinecap:"round","aria-labelledby":"title",children:[(0,s.jsx)("title",{children:"Filler"}),(0,s.jsx)("line",{x1:"0%",y1:"50%",x2:"100%",y2:"50%"})]}),(0,s.jsxs)("svg",{className:"shrink-0 h-5/6 ".concat(b?"":"rotate-180"),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-labelledby":"title",children:[(0,s.jsx)("title",{children:"Spreader"}),(0,s.jsx)("polyline",{points:"6 9 12 15 18 9"})]})]}),(0,s.jsxs)("div",{ref:y,className:"overflow-hidden transition-all",children:[n.state===p.b.LOADING&&(0,s.jsx)("div",{className:"w-full flex justify-center items-center overflow-hidden",children:(0,s.jsx)("img",{className:"h-8 animate-spin",alt:"Loading...",src:"data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='12' y1='2' x2='12' y2='6'%3E%3C/line%3E%3Cline x1='12' y1='18' x2='12' y2='22'%3E%3C/line%3E%3Cline x1='4.93' y1='4.93' x2='7.76' y2='7.76'%3E%3C/line%3E%3Cline x1='16.24' y1='16.24' x2='19.07' y2='19.07'%3E%3C/line%3E%3Cline x1='2' y1='12' x2='6' y2='12'%3E%3C/line%3E%3Cline x1='18' y1='12' x2='22' y2='12'%3E%3C/line%3E%3Cline x1='4.93' y1='19.07' x2='7.76' y2='16.24'%3E%3C/line%3E%3Cline x1='16.24' y1='7.76' x2='19.07' y2='4.93'%3E%3C/line%3E%3C/svg%3E"})}),n.state===p.b.ERROR&&(0,s.jsxs)("div",{className:"w-full flex flex-col justify-center items-center overflow-hidden",children:[(0,s.jsx)("img",{className:"h-8",alt:"Error",src:"data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolygon points='7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2'%3E%3C/polygon%3E%3Cline x1='12' y1='8' x2='12' y2='12'%3E%3C/line%3E%3Cline x1='12' y1='16' x2='12.01' y2='16'%3E%3C/line%3E%3C/svg%3E"}),(0,s.jsxs)("p",{className:"text-white text-xs text-center",children:["Error while fetching the songs data",n.error?(0,s.jsxs)(s.Fragment,{children:[":",(0,s.jsx)("br",{}),n.error]}):(0,s.jsx)(s.Fragment,{})]})]}),n.state===p.b.SUCCESS&&!(null===m||void 0===m?void 0:m.length)&&(0,s.jsxs)("div",{className:"w-full flex flex-col justify-center items-center overflow-hidden",children:[(0,s.jsx)("img",{className:"h-8",alt:"No songs",src:"sounds-info"===e.store?"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='12' y1='5' x2='12' y2='19'%3E%3C/line%3E%3Cline x1='5' y1='12' x2='19' y2='12'%3E%3C/line%3E%3C/svg%3E":"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='21 8 21 21 3 21 3 8'%3E%3C/polyline%3E%3Crect x='1' y='3' width='22' height='5'%3E%3C/rect%3E%3Cline x1='10' y1='12' x2='14' y2='12'%3E%3C/line%3E%3C/svg%3E"}),(0,s.jsx)("p",{className:"text-white text-xs text-center px-2",children:"sounds-info"===e.store?"No songs to show. Click on the blue button to add one !":"No drafts to show"})]}),n.state===p.b.SUCCESS&&!!(null===m||void 0===m?void 0:m.length)&&(0,s.jsx)("ul",{className:"list-none overflow-hidden px-1 w-full py-2",children:m})]})]})},v=n(1108),m=function(){var e=(0,o.useContext)(v.R).appData.router,t=(0,o.useState)(0),n=t[0],l=t[1];return(0,o.useEffect)((function(){"/app/songs/"===e.asPath&&l(Date.now())}),[e]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h,{title:"Songs - Slowed Reverb",description:"Edit your songs and make videos to match Slowed & Reverb aesthetic!"}),(0,s.jsxs)("div",{className:"w-full pb-20",children:[(0,s.jsx)(f,{className:"w-full text-white",store:"sounds-temp-info"},"".concat(n,"t")),(0,s.jsx)(f,{className:"w-full text-white",store:"sounds-info"},"".concat(n,"s"))]}),(0,s.jsx)("div",{id:"song-tab-add-button-ping",className:"fixed bottom-16 right-5 h-16 w-16 bg-slate-700 animate-big-elem-ping rounded"}),(0,s.jsx)("button",{id:"song-tab-add-button",className:"fixed bottom-16 right-5 h-16 w-16 text-white bg-app-primary-color rounded flex justify-center items-center box-border p-2",onClick:function(){return e.push({pathname:"/app/songs/",query:{md:"addSong"}},void 0,{shallow:!0})},children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-full h-full","aria-labelledby":"title",children:[(0,s.jsx)("title",{children:"Add a new song"}),(0,s.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,s.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})};m.getLayout=function(e){return(0,s.jsx)(l.Z,{tabName:"Songs",children:e})};var g=m},2226:function(e,t,n){"use strict";var s;n.d(t,{b:function(){return s}}),function(e){e[e.LOADING=0]="LOADING",e[e.ERROR=1]="ERROR",e[e.SUCCESS=2]="SUCCESS"}(s||(s={}))}},function(e){e.O(0,[457,265,664,53,774,888,179],(function(){return t=7706,e(e.s=t);var t}));var t=e.O();_N_E=t}]);